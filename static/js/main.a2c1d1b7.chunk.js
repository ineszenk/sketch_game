(this.webpackJsonpepfl_final_project=this.webpackJsonpepfl_final_project||[]).push([[0],{197:function(e,t,n){},291:function(e,t,n){},297:function(e,t){},298:function(e,t){},306:function(e,t){},309:function(e,t){},310:function(e,t){},311:function(e){e.exports=JSON.parse('["bird","book","car","cat","chair","flower","plane","sheep","ship","strawberry"]')},317:function(e,t,n){"use strict";n.r(t);var c=n(28),r=n(29),s=n.n(r),i=n(243),a=n.n(i),o=(n(291),n(197),n(6)),l=n(152),u=s.a.createContext({});function j(e){var t=e.labelToDraw;return Object(c.jsx)("div",{children:Object(c.jsx)(u.Provider,{value:{labelToDraw:t},children:Object(c.jsxs)("p",{children:["Please draw a ",t," "]})})})}var d=n(4),b=n.n(d),h=n(12);function f(e,t){var n,c=(n=e,l.b.fromPixels(n.current).resizeNearestNeighbor([28,28]).mean(2).expandDims(2).expandDims().toFloat().div(255));return t.then((function(e){return e.predict(c).data()})).then(function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a(t).data();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var p=s.a.createContext({});function O(e){var t=e.theCanvas,n=e.model,s=e.labels,i=Object(r.useState)(!1),a=Object(o.a)(i,2),l=a[0],u=a[1],j=function(e){var t=e.setPredict,n=e.predict,c=Object(r.useState)(20),s=Object(o.a)(c,2),i=s[0],a=s[1],l=Object(r.useContext)(k).next;return[setTimeout((function(){0===i&&(a(20),l()),n&&0!==i?(a(20),t(!1)):n||0===i||a(i-1)}),1e3),i]}({predict:l,setPredict:u}),d=Object(o.a)(j,2),b=d[0],h=d[1],O=Object(r.useState)(""),x=Object(o.a)(O,2),v=(x[0],x[1]),m=Object(r.useContext)(k),y=m.next,g=m.current,w=m.dispatch;return Object(r.useEffect)((function(){g+1<10&&(clearInterval(b),f(t,n).then((function(e){v(s[e[0]]),s[e[0]]===s[g]?(w(h<=5?{type:"increment"}:{type:"bonus"}),y(),u(!0)):console.log("Try Again !")})))})),Object(c.jsx)("div",{children:Object(c.jsx)(p.Provider,{value:s,children:Object(c.jsxs)("div",{className:"button_game",children:[Object(c.jsx)("p",{children:" Hurry up,"}),Object(c.jsxs)("p",{children:[" you have ",h," seconds left ! "]}),Object(c.jsxs)("button",{onClick:function(){g+1<=10&&f(t,n).then((function(e){v(s[e[0]]),u(!0),s[e[0]]===s[g]?(w(h<=5?{type:"increment"}:{type:"bonus"}),y()):(alert("Sorry but no...try harder next round !"),y())}))},children:["Submit early"," "]})]})})})}var x=s.a.forwardRef((function(e,t){var n,s,i=!1;return Object(r.useEffect)((function(){var e=t.current,n=e.getContext("2d");n.fillStyle="#ffffff",n.fillRect(0,0,e.height,e.width)})),Object(c.jsx)("canvas",{height:300,width:300,ref:t,onMouseDown:function(){return i=!0},onMouseUp:function(){i=!1,n=void 0,s=void 0},onMouseMove:function(e){return function(e){var t=e.target.getBoundingClientRect(),c=e.clientX-t.left,r=e.clientY-t.top;if(i){var a=function(e,t,n,c,r){var s=e.getContext("2d");return s.strokeStyle="#000000",s.lineWidth=12,s.lineJoin="round",s.beginPath(),s.moveTo(c,r),s.lineTo(t,n),s.closePath(),s.stroke(),[t,n]}(e.target,c,r,n,s),l=Object(o.a)(a,2);n=l[0],s=l[1]}}(e)}})})),v=n(107);function m(e,t){switch(t.type){case"reset":return 0;case"increment":return e+1;case"bonus":return e+2;case"decrement":return e-1;default:return e}}var y=l.c("/sketch_game/model/model.json"),g=n(311),w=s.a.createRef(),k=s.a.createContext({});function C(){var e=function(e){var t=Object(r.useState)(0),n=Object(o.a)(t,2),s=n[0],i=n[1];return[Array.apply(null,{length:e.length}).map((function(t,n){return Object(c.jsx)(j,{labelToDraw:e[n]})})),s,function(){return i(s<10?s+1:s)},function(){return i(0)}]}(g),t=Object(o.a)(e,4),n=t[0],s=t[1],i=t[2],a=t[3],l=Object(r.useReducer)(m,0),u=Object(o.a)(l,2),d=u[0],b=u[1];return console.log(s),Object(c.jsx)("div",{children:s>9?Object(c.jsxs)("div",{class:"nes-container is-dark with-title",children:[Object(c.jsx)("h1",{class:"title",children:"Sketch - End of the game"}),Object(c.jsx)("div",{children:d>5?Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{children:"You Win, well done !"}),Object(c.jsxs)("button",{type:"button",class:"nes-btn is-success",children:["You have scored ",d]}),Object(c.jsx)(v.b,{to:"/Home",children:Object(c.jsx)("button",{type:"button",class:"primary",children:"Click to try again !"})})]}):Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"You've lost"}),Object(c.jsx)("p",{children:"Hmm...pretty sure you can do better!"}),Object(c.jsxs)("button",{type:"button",class:"nes-btn is-error",children:["You have scored ",d]}),Object(c.jsx)(v.b,{to:"/Home",children:Object(c.jsx)("button",{type:"button",class:"primary",children:"Click to try again !"})})]})})]}):Object(c.jsxs)("div",{class:"nes-container is-dark with-title",children:[Object(c.jsxs)("h1",{class:"title",children:["Sketch - Round ",s+1," of 10"]}),Object(c.jsx)(v.b,{to:"/Home",children:Object(c.jsx)("button",{type:"button",class:"primary",onClick:function(){return a()},children:"Home"})}),Object(c.jsx)("div",{className:"GameContainer",children:Object(c.jsxs)(k.Provider,{value:{points:d,labels:g,rounds:n,current:s,next:i,reset:a,dispatch:b,ref:w,model:y},children:[Object(c.jsxs)("div",{className:"canvas",children:[Object(c.jsxs)("p",{children:[" ",n[s]]}),Object(c.jsx)(x,{ref:w}),Object(c.jsx)("button",{type:"button",class:"nes-btn is-warning",onClick:function(){var e=w.current;e.getContext("2d").fillRect(0,0,e.height,e.width)},children:"Clear the canvas."}),Object(c.jsxs)("p",{children:["Points : ",d]})]}),Object(c.jsx)("div",{className:"comments",children:Object(c.jsx)(O,{theCanvas:w,model:y,labels:g})})]})})]})})}var S=function(){return Object(c.jsx)(C,{})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,318)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),s(e),i(e)}))},D=n(47),T=n(5),N=n(10),G=n(14),H=n(15),M=(n(316),n(264)),R=n.n(M),E=function(e){Object(G.a)(n,e);var t=Object(H.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"componentDidMount",value:function(){var e={strings:this.props.strings,typeSpeed:50,showCursor:!1};this.typed=new R.a(this.el,e)}},{key:"componentWillUnmount",value:function(){this.typed.destroy()}},{key:"render",value:function(){var e=this;return Object(c.jsx)("div",{className:"wrap",children:Object(c.jsx)("span",{style:{whiteSpace:"pre"},ref:function(t){e.el=t}})})}}]),n}(s.a.Component),F=function(e){Object(G.a)(n,e);var t=Object(H.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("div",{class:"nes-container is-dark with-title is-centered",children:[Object(c.jsx)("h1",{class:"title",children:"Welcome to the wonderful Sketch Game"}),Object(c.jsx)("p",{children:Object(c.jsx)(E,{strings:["This game has been modeled-off Google's  <a href='https://quickdraw.withgoogle.com/#'>Quick, Draw!</a> game, <p>and uses a sampling from the Quick, Draw! <a href='dataset'>dataset.</a></p>  <p>Brought to you by the EPFL Extension School.</p>"]})}),Object(c.jsx)(v.b,{to:"/Game",children:Object(c.jsx)("button",{type:"button",class:"nes-btn is-primary",children:"Play Game"})}),Object(c.jsxs)("h6",{children:["Made with ",Object(c.jsx)("i",{class:"nes-icon is-small heart"})," in Geneva"]})]})}}]),n}(s.a.Component);var _=function(){return Object(c.jsx)(v.a,{children:Object(c.jsxs)(D.c,{children:[Object(c.jsx)(D.a,{path:"/Home",children:Object(c.jsx)(F,{})}),Object(c.jsx)(D.a,{path:"/Game",children:Object(c.jsx)(S,{})})]})})};a.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(_,{})}),document.getElementById("root")),P()}},[[317,1,2]]]);
//# sourceMappingURL=main.a2c1d1b7.chunk.js.map